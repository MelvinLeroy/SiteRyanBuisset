jQuery(document).ready(function(a){var f=a("#yith_wcmc_mailchimp_list, #yith_wcmc_shortcode_mailchimp_list, #yith_wcmc_widget_mailchimp_list, #yith_wcmc_export_list"),l=a("#yith_wcmc_mailchimp_groups, #yith_wcmc_shortcode_mailchimp_groups, #yith_wcmc_shortcode_mailchimp_groups_selectable, #yith_wcmc_widget_mailchimp_groups, #yith_wcmc_widget_mailchimp_groups_selectable"),m=a("#yith_wcmc_export_field_waiting_products");f.after(a("<a>").addClass("button button-secondary ajax-mailchimp-updater ajax-mailchimp-updater-list").attr("id",
    "yith_wmcm_mailchimp_list_updater").attr("href","#").text(yith_wcmc.labels.update_list_button));l.after(a("<a>").addClass("button button-secondary ajax-mailchimp-updater ajax-mailchimp-updater-group").attr("id","yith_wcmc_mailchimp_group_updater").attr("href","#").text(yith_wcmc.labels.update_group_button));m.after(a("<a>").addClass("button button-secondary ajax-mailchimp-updater ajax-mailchimp-updater-field").attr("id","yith_wcmc_mailchimp_field_updater").attr("href","#").text(yith_wcmc.labels.update_field_button));
    var n=function(b){var c=a(this),d=c.prev("select"),e=d.find("option:selected").val();b.preventDefault();a.ajax({beforeSend:function(){c.block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},complete:function(){c.unblock()},data:{request:"lists/list",force_update:!0,args:{sort_field:"web"},action:yith_wcmc.actions.do_request_via_ajax_action,yith_wcmc_ajax_request_nonce:yith_wcmc.ajax_request_nonce},dataType:"json",method:"POST",success:function(a){var c="",b=0;if(0!=a.data.length)for(b in a.data)c+=
        '<option value="'+a.data[b].id+'" '+(e==a.data[b].id?'selected="selected"':"")+" >"+a.data[b].name+"</option>";d.html(c);0==c.length?d.prop("disabled"):d.removeProp("disabled")},url:ajaxurl})},p=function(b){var c=a(this).hasClass("ajax-mailchimp-updater-group")?a(this).prev("select"):a(this).parents("tr").next().find("select"),d=c.closest("td"),e=c.closest("tr").siblings().find(".list-select").find("option:selected").val(),k=[];c.find("option:selected").each(function(c,b){k[c]=a(b).val()});b.preventDefault();
        0==e.length?c.prop("disabled"):c.removeProp("disabled");a.ajax({beforeSend:function(){d.block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},complete:function(){d.unblock()},data:{request:"lists/interest-groupings",force_update:!0,args:{id:e},action:yith_wcmc.actions.do_request_via_ajax_action,yith_wcmc_ajax_request_nonce:yith_wcmc.ajax_request_nonce},dataType:"json",method:"POST",success:function(b){var d="",e=0;if(0!=b.length)for(e in b){var g=0,h=b[e];if(0!=h.groups.length)for(g in h.groups)var f=
            h.groups[g],d=d+('<option value="'+h.id+"-"+f.name+'" '+(-1<a.inArray(h.id+"-"+f.name,k)?'selected="selected"':"")+" >"+h.name+" - "+f.name+"</option>")}c.html(d);0==d.length?c.prop("disabled"):c.removeProp("disabled");c.select2()},url:ajaxurl})},q=function(b){var c=a(this).hasClass("ajax-mailchimp-updater-field")?a(this).prev("select"):a(this).parents("tr").next().find("select"),d=c.closest("td"),e=c.closest("tr").siblings().find(".list-select").find("option:selected").val(),f=[];c.find("option:selected").each(function(c,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          b){f[c]=a(b).val()});b.preventDefault();0==e.length?c.prop("disabled"):c.removeProp("disabled");a.ajax({beforeSend:function(){d.block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},complete:function(){d.unblock()},data:{request:"lists/merge-vars",force_update:!0,args:{id:[e]},action:yith_wcmc.actions.do_request_via_ajax_action,yith_wcmc_ajax_request_nonce:yith_wcmc.ajax_request_nonce},dataType:"json",method:"POST",success:function(b){var d="",e=0;b=b.data[0].merge_vars;if(0!=b.length)for(e in b)var g=
        b[e],d=d+('<option value="'+g.tag+'" '+(-1<a.inArray(g.tag,f)?'selected="selected"':"")+" >"+g.name+"</option>");c.html(d);0==d.length?c.prop("disabled"):c.removeProp("disabled");c.select2()},url:ajaxurl})},f=function(){a(document).off("click",".ajax-mailchimp-updater-list");a(document).off("click",".ajax-mailchimp-updater-group");a(document).off("click",".ajax-mailchimp-updater-field");a(document).off("change",".list-select");a(document).on("click",".ajax-mailchimp-updater-list",n);a(document).on("click",
        ".ajax-mailchimp-updater-group",p);a(document).on("click",".ajax-mailchimp-updater-field",q);a(document).on("change",".list-select",function(){a(this).parents("tr").siblings().find(".ajax-mailchimp-updater-group").click();a(this).parents("tr").siblings().find(".ajax-mailchimp-updater-field").click()})};f();a("body").on("add_updater_handler",f);a("#yith_wcmc_checkout_trigger").on("change",function(){var b=a(this),c=a("#yith_wcmc_subscription_checkbox"),d=a("#yith_wcmc_double_optin");"never"!=b.val()?
        (c.parents("tr").show(),d.parents("tr").show(),a("#yith_wcmc_email_type").parents("tr").show(),a("#yith_wcmc_subscription_checkbox_label").parents("tr").show(),a("#yith_wcmc_subscription_checkbox_position").parents("tr").show(),a("#yith_wcmc_subscription_checkbox_default").parents("tr").show(),a("#yith_wcmc_update_existing").parents("tr").show(),a("#yith_wcmc_replace_interests").parents("tr").show(),a("#yith_wcmc_send_welcome").parents("tr").show(),c.change(),d.change()):(c.parents("tr").hide(),d.parents("tr").hide(),
        a("#yith_wcmc_email_type").parents("tr").hide(),a("#yith_wcmc_subscription_checkbox_label").parents("tr").hide(),a("#yith_wcmc_subscription_checkbox_position").parents("tr").hide(),a("#yith_wcmc_subscription_checkbox_default").parents("tr").hide(),a("#yith_wcmc_update_existing").parents("tr").hide(),a("#yith_wcmc_replace_interests").parents("tr").hide(),a("#yith_wcmc_send_welcome").parents("tr").hide())}).change();a("#yith_wcmc_ecommerce360_enable").on("change",function(){var b=a(this),c=a("#yith_wcmc_ecommerce360_cookie_lifetime");
        b.is(":checked")?c.parents("tr").show():c.parents("tr").hide()}).change();a("#yith_wcmc_subscription_checkbox").on("change",function(){var b=a(this);b.is(":visible")&&(b.is(":checked")?(a("#yith_wcmc_subscription_checkbox_label").parents("tr").show(),a("#yith_wcmc_subscription_checkbox_position").parents("tr").show(),a("#yith_wcmc_subscription_checkbox_default").parents("tr").show()):(a("#yith_wcmc_subscription_checkbox_label").parents("tr").hide(),a("#yith_wcmc_subscription_checkbox_position").parents("tr").hide(),
        a("#yith_wcmc_subscription_checkbox_default").parents("tr").hide()))}).change();a("#yith_wcmc_double_optin").on("change",function(){var b=a(this);b.is(":visible")&&(b.is(":checked")?a("#yith_wcmc_send_welcome").parents("tr").hide():a("#yith_wcmc_send_welcome").parents("tr").show())}).change();a("#yith_wcmc_shortcode_double_optin").on("change",function(){var b=a(this);b.is(":visible")&&(b.is(":checked")?a("#yith_wcmc_shortcode_send_welcome").parents("tr").hide():a("#yith_wcmc_shortcode_send_welcome").parents("tr").show())}).change();
    a("#yith_wcmc_widget_double_optin").on("change",function(){var b=a(this);b.is(":visible")&&(b.is(":checked")?a("#yith_wcmc_widget_send_welcome").parents("tr").hide():a("#yith_wcmc_widget_send_welcome").parents("tr").show())}).change()});